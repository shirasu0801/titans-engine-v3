/* Chess Pieces 3D Effects and Animations */

.piece {
    width: 52px;
    height: 52px;
    cursor: grab;
    transition: transform 0.15s ease-out, filter 0.15s ease-out;
    filter: drop-shadow(2px 4px 3px rgba(0, 0, 0, 0.35));
    user-select: none;
    -webkit-user-drag: none;
    touch-action: none;
}

.piece svg {
    width: 100%;
    height: 100%;
    pointer-events: none;
}

/* Hover effect - piece lifts up slightly */
.piece:hover {
    transform: translateY(-4px) scale(1.05);
    filter: drop-shadow(3px 8px 5px rgba(0, 0, 0, 0.3));
}

/* Selected piece */
.piece.selected {
    transform: translateY(-6px) scale(1.08);
    filter: drop-shadow(4px 10px 6px rgba(0, 0, 0, 0.25));
    z-index: 50;
}

/* Dragging piece */
.piece.dragging {
    cursor: grabbing;
    transform: scale(1.15);
    filter: drop-shadow(8px 16px 12px rgba(0, 0, 0, 0.3));
    z-index: 100;
    opacity: 0.95;
    transition: none;
    pointer-events: none;
}

/* Ghost piece (original position while dragging) */
.piece.ghost {
    opacity: 0.3;
    pointer-events: none;
}

/* Piece that can be moved (current turn) */
.piece.movable {
    cursor: grab;
}

.piece.movable:active {
    cursor: grabbing;
}

/* Piece that cannot be moved */
.piece.inactive {
    cursor: default;
}

.piece.inactive:hover {
    transform: none;
    filter: drop-shadow(2px 4px 3px rgba(0, 0, 0, 0.35));
}

/* Move animation */
.piece.moving {
    transition: transform 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    z-index: 75;
}

/* Capture animation - slight shake */
@keyframes capture {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-3deg); }
    75% { transform: rotate(3deg); }
}

.piece.captured {
    animation: capture 0.2s ease-in-out;
}

/* Promotion animation */
@keyframes promote {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); }
    100% { transform: scale(1); }
}

.piece.promoting {
    animation: promote 0.4s ease-in-out;
}

/* Check highlight on king */
.piece.in-check {
    animation: check-pulse 1s infinite;
}

@keyframes check-pulse {
    0%, 100% {
        filter: drop-shadow(2px 4px 3px rgba(0, 0, 0, 0.35));
    }
    50% {
        filter: drop-shadow(0 0 15px rgba(255, 0, 0, 0.8))
                drop-shadow(2px 4px 3px rgba(0, 0, 0, 0.35));
    }
}

/* Piece appearing (new game or undo) */
@keyframes piece-appear {
    from {
        opacity: 0;
        transform: scale(0.5);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.piece.appearing {
    animation: piece-appear 0.3s ease-out;
}

/* Responsive piece sizing */
@media (max-width: 520px) {
    .piece {
        width: 40px;
        height: 40px;
    }
}

@media (max-width: 380px) {
    .piece {
        width: 34px;
        height: 34px;
    }
}

/* Touch device adjustments */
@media (hover: none) {
    .piece:hover {
        transform: none;
        filter: drop-shadow(2px 4px 3px rgba(0, 0, 0, 0.35));
    }

    .piece.selected {
        transform: translateY(-4px) scale(1.05);
    }
}
